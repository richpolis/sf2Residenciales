<?php

namespace Richpolis\FrontendBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

use Richpolis\BackendBundle\Utils\Richsys as RpsStms;

/**
 * EstadoCuenta
 *
 * @ORM\Table(name="estadodecuenta")
 * @ORM\Entity(repositoryClass="Richpolis\FrontendBundle\Repository\EstadoCuentaRepository")
 * @ORM\HasLifecycleCallbacks()
 */
class EstadoCuenta
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="cargo", type="decimal")
     * @Assert\NotBlank(message="Ingresa un monto a cargo")
     */
    private $cargo;

    /**
     * @var integer
     * @todo Tipo de cargo aplicado, o la causa
     *
     * @ORM\Column(name="tipo", type="integer")
     */
    private $tipo;
    
    /**
     * @var \Usuario
     * @todo Usuario del estado de cuenta
     *
     * @ORM\ManyToOne(targetEntity="Richpolis\BackendBundle\Entity\Usuario")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="usuario_id", referencedColumnName="id")
     * })
     */
    private $usuario;


    /**
     * @var \DateTime
     *
     * @ORM\Column(name="created_at", type="date")
     */
    private $createdAt;
    
    /*
     * Timestable
     */
    
    /**
     * @ORM\PrePersist
     */
    public function setCreatedAtValue()
    {
        if(!$this->getCreatedAt())
        {
          $this->createdAt = new \DateTime();
        }
    }

}
